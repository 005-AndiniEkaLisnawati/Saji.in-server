generator client {
  provider = "prisma-client-js"
}   

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum UserRole {
  admin
  barista
}

enum OrderStatus {
  pending
  processing
  ready
  served
}


model User {
  id_user    Int      @id @default(autoincrement())
  name       String
  email      String   @unique
  password   String
  role       UserRole
  created_at DateTime @default(now())

  @@map("users")
}

model Table {
  id_table     Int      @id @default(autoincrement())
  table_number Int      @unique
  qr_link      String   @unique
  created_at   DateTime @default(now())

  orders Order[]

  @@map("tables")
}

model Category {
  id_category   Int      @id @default(autoincrement())
  category_name String
  created_at    DateTime @default(now())

  menus Menu[]

  @@map("categories")
}

model Menu {
  id_menu      Int      @id @default(autoincrement())
  id_category  Int
  menu_name    String
  price        Int
  description  String?
  image        String?
  is_available Boolean  @default(true)
  created_at   DateTime @default(now())

  category    Category   @relation(fields: [id_category], references: [id_category])
  order_items OrderItem[]

  @@map("menus")
}

model Customer {
  id_customer Int      @id @default(autoincrement())
  name        String
  created_at  DateTime @default(now())

  orders Order[]

  @@map("customers")
}

model Order {
  id_order     Int         @id @default(autoincrement())
  id_customer  Int
  id_table     Int
  total_price  Int
  order_status OrderStatus @default(pending)
  order_time   DateTime    @default(now())

  customer Customer @relation(fields: [id_customer], references: [id_customer])
  table    Table    @relation(fields: [id_table], references: [id_table])
  items    OrderItem[]

  @@map("orders")
}

model OrderItem {
  id_order_item Int    @id @default(autoincrement())
  id_order      Int
  id_menu       Int
  quantity      Int
  note          String?

  order Order @relation(fields: [id_order], references: [id_order])
  menu  Menu  @relation(fields: [id_menu], references: [id_menu])

  @@map("order_items")
}

model Promos {
  id_promos   Int @id @default(autoincrement())
  type        DiskonType
  name        String
  value       Int
  is_active   Boolean

  created_at  DateTime @default(now())
}

enum DiskonType {
  FIXED
  PERCENT
}



        